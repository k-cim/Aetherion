// === File: ThemedModifiers.swift
// Version: 1.2
// Date: 2025-08-30 20:45:00 UTC
// Description: Common themed helpers. ThemedScreen uses ThemeManager.backgroundColor live.
// Author: K-Cim

import SwiftUI

// MARK: - Themed Screen

struct ThemedScreen<Content: View>: View {
    @EnvironmentObject private var themeManager: ThemeManager
    let content: () -> Content

    init(@ViewBuilder content: @escaping () -> Content) {
        self.content = content
    }

    var body: some View {
        ZStack {
            themeManager.backgroundColor
                .ignoresSafeArea()
            content()
        }
    }
}

// MARK: - Themed Card

struct ThemedCard<Content: View>: View {
    @EnvironmentObject private var themeManager: ThemeManager
    let content: () -> Content

    init(@ViewBuilder content: @escaping () -> Content) {
        self.content = content
    }

    var body: some View {
        RoundedRectangle(cornerRadius: themeManager.theme.cornerRadius, style: .continuous)
            .fill(
                LinearGradient(
                    colors: [
                        Color.white.opacity(themeManager.theme.cardStartOpacity),
                        Color.white.opacity(themeManager.theme.cardEndOpacity)
                    ],
                    startPoint: .leading,
                    endPoint: .trailing
                )
            )
            .overlay(
                RoundedRectangle(cornerRadius: themeManager.theme.cornerRadius)
                    .strokeBorder(Color.white.opacity(0.08))
            )
            .overlay(
                VStack(alignment: .leading, spacing: 8) {
                    content()
                }
                .padding(16)
            )
    }
}

// MARK: - Foreground helpers

extension View {
    func themedForeground(_ theme: Theme) -> some View {
        self.foregroundStyle(Color.white)
    }

    func themedSecondary(_ theme: Theme) -> some View {
        self.foregroundStyle(Color.white.opacity(0.7))
    }
}
